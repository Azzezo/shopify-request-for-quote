# Learn more about configuring your app at https://shopify.dev/docs/apps/tools/cli/configuration

client_id = "4e76630129642980167b72fff7e9ec18"
name = "Request A Quote"
application_url = "https://shopify-request-for-quote.vercel.app"
embedded = true

[build]
automatically_update_urls_on_dev = true

[webhooks]
api_version = "2026-01"

[access_scopes]
scopes = "read_metaobjects,write_metaobjects,write_metaobject_definitions,read_products,write_products"

[auth]
redirect_urls = [
  "https://shopify-request-for-quote.vercel.app/auth/callback",
  "https://shopify-request-for-quote.vercel.app/auth/shopify/callback"
]

[app_proxy]
url = "https://shopify-request-for-quote.vercel.app/api/proxy"
subpath = "rfq"
prefix = "apps"

# Product metafield definitions
[product.metafields.app.rfq_enabled]
name = "Enable Request for Quote"
description = "When enabled, the Add to Cart button will be replaced with a Request for Quote button"
type = "boolean"
access.admin = "merchant_read_write"
access.storefront = "public_read"

[product.metafields.app.rfq_hide_price]
name = "Hide Price"
description = "When enabled, the product price will be hidden"
type = "boolean"
access.admin = "merchant_read_write"
access.storefront = "public_read"

# ============================================
# SHOP-OWNED METAOBJECTS
# ============================================
# NOTE: Shop-owned metaobjects are created PROGRAMMATICALLY
# in app/services/metaobject-setup.server.ts
# 
# This ensures data persists even if the app is uninstalled!
# The app creates these types on first load:
#   - rfq_settings: Stores app configuration
#   - rfq_submission: Stores quote requests from customers
#
# We removed the [metaobjects.app.*] sections because:
#   - app.* prefix creates APP-OWNED metaobjects (deleted on uninstall)
#   - Shop-owned metaobjects must be created via GraphQL API
# ============================================
